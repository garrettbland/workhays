<% /*
===========================================================================

Description:
Navbar of website, used on all views.

To Do:

Params:


===========================================================================
*/ %>

<div x-data="menu()" class="w-full bg-white border-b border-gray-300 fixed top-0 left-0 z-40">
	<div class="max-w-4xl mx-auto flex justify-between items-center py-3 px-3 lg:px-0">

		<!-- logo -->
		<a href="/" class="text-lg">
			<span class="font-light text-gray-600">Work</span><span class="font-bold">Hays</span>
		</a>

		<!-- mobile menu button-->
		<div class="block lg:hidden">
			<button x-on:click="open('showMobileMenu')" class="flex items-center focus:outline-none">
				<span class="mr-2">
					Menu
				</span> 
				<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg>
			</button>
		</div>

		<!-- mobile menu -->
		<div x-show.transition.in.opacity.scale.100.duration.300.out.scale.100.opacity.duration.400="showMobileMenu" class="h-screen w-screen bg-overlay-500 fixed top-0 left-0 z-40 lg:hidden p-3">
			<div x-show.transition="showMobileMenu" class="bg-white rounded shadow-lg m-3 overflow-x-scroll max-w-lg mx-auto">
				<div class="flex justify-between items-center p-4 mb-3">
					<!-- logo -->
					<a href="/" class="text-lg">
						<span class="font-light text-gray-600">Work</span><span class="font-bold">hays</span>
					</a>
					<!-- close x -->
					<button x-on:click="close('showMobileMenu')" class="focus:outline-none">
						<svg class="text-red-500" viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" ><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
					</button>
				</div>
				<ul class="flex flex-col mb-3">
					<li class="px-3">
						<a href="/" class="flex justify-between items-center block py-3 px-3 rounded-lg hover:bg-gray-100 mb-1 <%= activeUrl === '' ? 'text-blue-500 bg-gray-100' : activeUrl === 'jobs' ? 'text-blue-500 bg-gray-100' : null%>">
							Jobs
							<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" ><polyline points="9 18 15 12 9 6"></polyline></svg>
						</a>
					</li>
					<li class="px-3">
						<a href="/employers" class="flex justify-between items-center block py-3 px-3 rounded-lg hover:bg-gray-100 mb-1 <%= activeUrl === 'employers' ? 'text-blue-500 bg-gray-100' : null %>">
							Employers
							<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" ><polyline points="9 18 15 12 9 6"></polyline></svg>
						</a>
					</li>
					<li class="px-3">
						<a href="/about" class="flex justify-between items-center block py-3 px-3 rounded-lg hover:bg-gray-100 mb-1 <%= activeUrl === 'about' ? 'text-blue-500 bg-gray-100' : null %>">
							About
							<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" ><polyline points="9 18 15 12 9 6"></polyline></svg>
						</a>
					</li>
					<li class="px-3">
						<a href="/contact" class="flex justify-between items-center block py-3 px-3 rounded-lg hover:bg-gray-100 mb-1<%= activeUrl === 'contact' ? 'text-blue-500 bg-gray-100' : null %>">
							Contact
							<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" ><polyline points="9 18 15 12 9 6"></polyline></svg>
						</a>
					</li>
					<% if (user) { %>
						<li class="px-3">
							<a href="/account" class="flex justify-between items-center block py-3 px-3 rounded-lg hover:bg-gray-100 mb-1 <%= activeUrl === 'account' ? 'text-blue-500 bg-gray-100' : null %>">
								My Account
								<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" ><polyline points="9 18 15 12 9 6"></polyline></svg>
							</a>
						</li>
						<li class="px-3">
							<a href="/logout" class="flex justify-between items-center block py-3 px-3 rounded-lg hover:bg-gray-100 mb-1">
								Logout
								<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 text-gray-800"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
							</a>
						</li>
					<% } else { %>
						<li class="px-3">
							<a href="/signup" class="flex justify-between items-center block py-3 px-3 rounded-lg hover:bg-gray-100 mb-1 <%= activeUrl === 'signup' ? 'text-blue-500 bg-gray-100' : null %>">
								Sign Up
								<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" ><polyline points="9 18 15 12 9 6"></polyline></svg>
							</a>
						</li>
						<li class="px-3">
							<a href="/signin" class="flex justify-between items-center block py-3 px-3 rounded-lg hover:bg-gray-100 mb-1 <%= activeUrl === 'signin' ? 'text-blue-500 bg-gray-100' : null %>">
								Sign In
								<svg viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" ><polyline points="9 18 15 12 9 6"></polyline></svg>
							</a>
						</li>
					<% }%>
				</ul>
			</div>
		</div>

		<!-- desktop menu -->
		<div class="hidden lg:block">
			<ul class="flex flex-row items-center">
				<li>
					<a href="/" class="py-2 px-3 hover:bg-gray-200 transition ease-in-out duration-75 rounded <%= activeUrl === '' ? 'text-blue-500' : activeUrl === 'jobs' ? 'text-blue-500' : 'text-gray-900' %>">
						Jobs
					</a>
				</li>
				<li>
					<a href="/employers" class="py-2 px-3 hover:bg-gray-200 transition ease-in-out duration-75 rounded <%= activeUrl === 'employers' ? 'text-blue-500' : 'text-gray-900' %>">
						Employers
					</a>
				</li>
				<li>
					<a href="/about" class="py-2 px-3 hover:bg-gray-200 transition ease-in-out duration-75 rounded <%= activeUrl === 'about' ? 'text-blue-500' : 'text-gray-900' %>">
						About
					</a>
				</li>
				<li>
					<a href="/contact" class="py-2 px-3 hover:bg-gray-200 transition ease-in-out duration-75 rounded <%= activeUrl === 'contact' ? 'text-blue-500' : 'text-gray-900' %>">
						Contact
					</a>
				</li>
				<% if (user) { %>
					<li class="relative">
						<button x-on:click="open('showAccountDropdown')" class="py-0 px-3 transition ease-in-out duration-75 flex flex-row items-center hover:text-blue-500 focus:outline-none">
							<span class="mr-1">
								My Account
							</span>
							<svg x-bind:class="{ 'rotate-180' : showAccountDropdown }" class="transform transition duration-75 ease-in-out w-4 h-4" viewBox="0 0 24 24" width="24" height="24" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round" ><polyline points="6 9 12 15 18 9"></polyline></svg>
						</button>
						<div x-show.transition.origin.top.right="showAccountDropdown" x-on:click.away="close('showAccountDropdown')" @keydown.escape="close('showAccountDropdown')" class="bg-white shadow-lg border rounded absolute right-0 mt-2">
							<div class="rounded-md bg-white shadow-xs">
								<div class="px-4 py-3">
								  <p class="text-sm leading-5">
									Signed in as
								  </p>
								  <p class="text-sm leading-5 font-medium text-gray-900">
									<%= user.email %>
								  </p>
								</div>
								<div class="border-t border-gray-100"></div>
								<div class="py-1">
								  <a href="/account" class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900">Account settings</a>
								  <a href="/job-listing-new" class="block px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900">New Job Listing</a>
								</div>
								<div class="border-t border-gray-100"></div>
								<div class="py-1">
									<a href="/logout" class="block w-full text-left px-4 py-2 text-sm leading-5 text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:outline-none focus:bg-gray-100 focus:text-gray-900">
										Logout
									  </a>
								</div>
							  </div>
						</div>
						<!-- <ul x-show.transition.origin.top.right="showAccountDropdown" x-on:click.away="close('showAccountDropdown')"
								class="w-48 bg-white shadow-lg border rounded absolute right-0 mt-2">
							<li class="px-2 py-1">
								<span class="text-lg text-blue-500 focus:outline-none">
									Hi, <%= user.first_name %>
								</span>
							</li>
							<a href="/job-listing-new">
								<li class="hover:bg-gray-100 cursor-pointer px-2 py-1 text-lg text-green-500 focus:outline-none">
									New Listing
								</li>
							</a>
							<a href="/account">
								<li class="hover:bg-gray-100 cursor-pointer px-2 py-1 text-lg text-blue-500 focus:outline-none">
									Account
								</li>
							</a>
							<a href="/logout">
								<li class="hover:bg-gray-100 cursor-pointer px-2 py-1 text-lg text-red-500 focus:outline-none">
									Sign Out
								</li>
							</a>
						</ul> -->
					</li>
				<% } else { %>
					<li>
						<a href="/signup" class="py-2 px-3 hover:bg-gray-200 transition ease-in-out duration-75 rounded <%= activeUrl === 'signup' ? 'text-blue-500' : 'text-gray-900' %>">
							Sign Up
						</a>
					</li>
					<li>
						<a href="/signin" class="py-2 px-3 hover:bg-gray-200 transition ease-in-out duration-75 rounded <%= activeUrl === 'signin' ? 'text-blue-500' : 'text-gray-900' %>">
							Sign In
						</a>
					</li>
				<% } %>
			</ul>
		</div>
	</div>
</div>

<script>
	function menu() {
		return {
			showMobileMenu: false,
			showAccountDropdown: false,
			open: function (key) {
				this[key] = true
			},
			close: function (key) {
				this[key] = false
			},

		}
	}
</script>