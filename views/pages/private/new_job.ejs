<%- include('../../partials/page_start', {title: 'New Job', description: 'Create a new job position and add details.'}) %>

<style>
	trix-toolbar [data-trix-attribute='quote'],
	trix-toolbar [data-trix-attribute='code'],
	trix-toolbar [data-trix-button-group='file-tools'] {
	  display: none;
	}

button.trix-button.trix-button--icon.trix-button--icon-increase-nesting-level {
    display: none;
}

button.trix-button.trix-button--icon.trix-button--icon-decrease-nesting-level {
    display: none;
}

#description_input_trix ul {
    list-style-type: disc;
    list-style-position: inside;
}

#description_input_trix ol {
    list-style-type: decimal;
    list-style-position: inside;
}
</style>

<div class="max-w-4xl mx-auto mt-12">
	<div class="grid grid-cols-1 md:grid-cols-8 gap-4">
		<%- include('../../partials/admin_sidebar') %>
		<div x-data="editJob()" x-init="isActive = true" class="col-span-1 md:col-span-6">
			<!-- content -->


			<div x-show="showErrorMessage" class="mb-8 p-4 bg-red-500 rounded shadow text-white flex items-center mx-4 lg:mx-0" style="display:none;">
				<div class="mr-4">
					<i data-feather="alert-circle" class="w-5 h-5"></i>
				</div>
				<div>
					<p class="font-bold leading-5">
						Error
					</p>
					<p class="text-base leading-tight">
						Something went wrong. Make sure a job title and description are provided.
					</p>
				</div>
			</div>

			<form x-on:submit="return validateForm()" method="POST" action="/jobs">
				<div class="flex flex-wrap justify-between items-center mb-4 px-4 lg:px-0">
					<div class="w-full md:w-2/3 mb-3 md:mb-0">
						<div class="text-lg font-semibold">
							New Job
						</div>
						<div class="antialiased text-sm">
							Create a new job to be listed on Work Hays
						</div>
					</div>
				</div>
				<div class="grid grid-span-6 gap-4 px-4 lg:px-0">
					<div class="col-span-6">
						<label class="text-sm text-gray-600 mb-2">
							Status
						</label>
						<div class="flex flex-row items-center">
							<div :class="{ 'bg-gray-200': !isActive, 'bg-green-400': isActive }" class="relative inline-block flex-shrink-0 h-6 w-11 border-2 border-transparent rounded-full cursor-pointer transition-colors ease-in-out duration-200 focus:outline-none focus:shadow-outline" role="checkbox" tabindex="0" @click="toggle()" @keydown.space.prevent="toggle()" :aria-checked="isActive.toString()">
								<input name="status" hidden x-model="isActive ? 'active' : 'inactive'"/>
								<span aria-hidden="true" :class="{ 'translate-x-5': isActive, 'translate-x-0': !isActive }" class="inline-block h-5 w-5 rounded-full bg-white shadow transform transition ease-in-out duration-200">

								</span>
							</div>
							<div x-text="isActive ? 'active' : 'inactive'" class="ml-2 font-semibold uppercase text-xs tracking-wide text-gray-600">

							</div>
						</div>
					</div>
					<div class="col-span-6">
						<label class="text-sm text-gray-600 mb-2">
							* Job Title
						</label>
						<input id="job_title" name="title" class="mr-0 mb-3 w-full rounded px-3 py-2 shadow focus:outline-none focus:shadow-outline-blue" type="text" placeholder="eg. Retail Sales Associate" />
					</div>
					<div class="col-span-6 md:col-span-3">
						<div class="text-sm text-gray-600 mb-2">
							<label class="text-sm text-gray-600 mb-2">
								Full Time or Part Time
							</label>
						</div>
						<label class="inline-flex items-center">
							<input type="radio" class="form-radio text-indigo-500" name="job_type" checked value="full_time">
							<span class="ml-2">Full Time</span>
						  </label>
						  <label class="inline-flex items-center ml-6">
							<input type="radio" class="form-radio text-indigo-500" name="job_type" value="part_time">
							<span class="ml-2">Part Time</span>
						</label>
					</div>
					<div class="col-span-6">
						<label class="text-sm text-gray-600 mb-2">
							* Job Description
						</label>
						<input type="hidden" name="description" id="description_input">
						<trix-editor id="description_input_trix" input="description_input" class="bg-white border-none shadow rounded focus:shadow-outline-blue px-3 py-2" placeholder="Describe the job position opening with as much or little detail as desired."></trix-editor>
					</div>
					<div class="col-span-6">
						<label class="text-sm text-gray-600 mb-2">
							Application Link
						</label>
						<input name="application_link" class="mr-0 mb-3 w-full rounded px-3 py-2 shadow focus:outline-none focus:shadow-outline-blue" type="text" placeholder="https://yoursite.com/application" />
					</div>
				</div>
				<div class="flex flex-wrap justify-between items-center mt-4 px-4 lg:px-0">
					<div class="w-full md:w-2/3 mb-3 md:mb-0">

					</div>
					<div class="w-full md:w-auto">
						<button type="submit" class="block px-3 py-2 text-center text-sm font-medium rounded text-white bg-green-400 focus:outline-none focus:shadow-outline-green transition ease-in-out duration-150 shadow border border-green-400 transition transform duration-75 ease-in-out hover:-translate-y-0.1">
							Create Job
						</button>
					</div>
				</div>
			</form>
			<!-- content end -->
		</div>
	</div>
</div>


<script>
	function editJob () {
		return {
			isActive: false,
			showErrorMessage: false,
			checkEmptyFields: function () {
				// required fields
				var title = document.getElementById('job_title').value
				var description = document.getElementById('description_input').value

				console.log(title)

				if(title !== '' && description !== '') {
					return true
				} else {
					this.showErrorMessage = true
					return false
				}
			},
			validateForm: function () {
				this.showErrorMessage = false

				// required fields
				var title = document.getElementById('job_title').value
				var description = document.getElementById('description_input').value

				if(title === '' || description === '') {
					this.showErrorMessage = true
					return false
				}
			},
			toggle: function () {
				this.isActive = !this.isActive
			}
		}
	}
</script>

<%- include('../../partials/page_end') %>